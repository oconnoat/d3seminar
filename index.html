<!doctype html>

<html lang="en">
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>Displaying Dazzling Data</title>

    <meta name="description" content="An introduction to Data-driven documents.js" />
    <meta name="author" content="Alexander O'Connor" />

    <!-- font awesome -->
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.0/css/font-awesome.css" rel="stylesheet">
    <!-- google fonts -->
    <link href='//fonts.googleapis.com/css?family=Kameron:700|Luckiest+Guy|Oxygen&subset=latin,latin-ext' rel='stylesheet' type='text/css' />
    <link rel="stylesheet" href="css/d3seminar.css" />

</head>
<body>
<div id="impress">

    <div id="titleSlide" class="step slide" data-x="0" data-y="0" data-scale="0.25">
        <div id="logo"></div>
    </div>
    <!-- d -->
    <div id="javascript" class="step slide letterD" data-x="-1500" data-y="-2000">
        <h1>Javascript -- the <em>super</em>-fast version.</h1>
        <ul id="js">
            <li>function(arg1, arg2){ }</li>
            <li>[1, 2, 3, 4]</li>
            <li>{"a":1, "b":2}</li>
            <li><span>a["x"]</span><span>a.b</span><span>a(b)</span><span>a.b(c)</span></li>
        </ul>
        <h2><a href="http://eloquentjavascript.net/">http://eloquentjavascript.net/</a></h2>
    </div>
    <div id="isandisnt" class="step slide letterD" data-x="-1500" data-y="-1000">
            <div id="what">
                <ul>
                    <li class="is">Visualisation</li>
                    <li class="is">Data</li>
                    <li class="is">Animation</li>
                    <li class="is">Interaction</li>
                    <li class="not">Reusable Charts, Graphs</li>
                </ul>
            </div>
            <div id="examples">
                <ul>
                    <li><a href="http://www.nytimes.com/interactive/2013/02/20/movies/among-the-oscar-contenders-a-host-of-connections.html">NY Times Oscar Connections</a></li>
                    <li><a href="http://visualizing.org/full-screen/56202">Meteors hitting the Earth</a></li>
                    <li><a href="https://github.com/mbostock/d3/wiki/Gallery">D3.js Gallery</a></li>
                    <li><a href="http://www.newyorker.com/sandbox/business/beer.html">Mapping the Rise of Craft Beer (New Yorker)</a></li>
                </ul>
            </div>
    </div>
    <div id="svg" class="step slide letterD" data-x="-1500" data-y="0">
        <div id="svgchart"></div>
    </div>
    <div id="svgCode" class="step slide code" data-x="-1500" data-y="0" data-z="-1000" data-rotate-y="90">
        <h3>Create the SVG element</h3>
        <pre class="prettyprint">
var svgslide = d3.select("#svg #chart").append("svg:svg")
            .attr("width", slideWidth-100)
            .attr("height", slideHeight-100)
            .attr("class", "chart")
            .attr("class", "borders");</pre>
        <h3>Add a Text Element</h3>
        <pre class="prettyprint">
          svgslide.append("text")
            .attr("y", 325)
            .attr("x", 175)
            .attr("class", "logoText")
            .text("SVG");
        </pre>
    </div>
    <div id="shapes" class="step slide letterD" data-x="-1500" data-y="1000">
        <h3>Drawing things is simple</h3>
        <div id="shapechart"></div>
        <pre class="prettyprint">
shapeslide.append("circle")
  .attr("cx", "50%")
  .attr("cy", "50%")
  .attr("r", "100")
  .attr("fill", "#fff");
</pre>
    </div>
    <div id="selectors" class="step slide letterD" data-x="-1500" data-y="2000">
        <h3>Selectors</h3>
        <h3>Select a document element and assign it to a variable</h3>
        <pre>var slide =
d3.select("#svg #chart").append("svg:svg")</pre>
        <h3>Select things <em>that don't yet exist (!)</h3>
            <pre>var circles = slide.selectAll("circle")</pre>
            <h3><a href="https://github.com/mbostock/d3/wiki/Selections">https://github.com/mbostock/d3/wiki/Selections</a></h3>
    </div>
    <div id="datadriven" class="step slide letterD" data-x="-2500" data-y="2000">
        <h3><em>Data</em>-driven Documents</h3>
        <div id="countrychart"></div>

        <pre>var exampleData = [
    {"name":"Ireland","value":852}, {"name":"United Kingdom", "value":406},
    {"name":"France","value":182}, {"name":"Greece", "value":174},
    {"name":"Zimbabwe","value":103}];</pre>
        <a href="http://en.wikipedia.org/wiki/List_of_countries_by_external_debt">Source</a>
            </div>

    <div id="datacode" class="step slide code" data-x="-2500" data-y="2000" data-z="-1000" data-rotate-y="90">
        <pre>
var countryscale = d3.scale.linear()
  .domain([0, d3.max(exampleData, function(d){return d.value;})])
  .range([0, 1]);

countryslide.selectAll("circle")
  .data(exampleData)
  .enter()
  .append("circle")
  .attr("cx", function(d,i){return (i * 20 + 15) + "%";})
  .attr("cy", "50%")
  .attr("fill", "white")
  .attr("r", function(d,i){return countryscale(d.value) * 100;})</pre>
    </div>
    <div id="animation" class="step slide letterD" data-x="-3500" data-y="2000">
        <div id="position">
        <div id="animchartPos"></div>
        <div id="animcodePos">
<pre class="prettyprint">
animslidePos.select("rect")
  .transition()
  .duration(1000)
  .attr("x", "80%")
  .attr("y", "75%")
  .transition()
  .delay(1000)
  .attr("fill", "red");
</pre>
        </div>
    </div>
    <div id="addition">
       <div id="animchartAdd"></div>
       <div id="animcodeAdd">
<pre class="prettyprint">
animslideAdd.selectAll("text")
  .data(animslideAddData)
  .enter()
  .append("text")
  .attr("fill", "#00ff00")
  .attr("stroke", "#ddffdd")
  .attr("transform", "rotate(90)")
  .attr("font-size", "22px")
  .attr("x", "-20%")
  .attr("y", function(d,i){ return (-70 * i); })
  .text(function(d,i){console.log(d); return d;})
  .transition().duration(2000)
  .attr("x", "100%");
</pre>
        </div>
    </div>
    </div>
    <div class="step slide letterD" data-x="-4500" data-y="1000">
        <h3>Interaction</h3>
        <pre>d3.on()</pre>

    </div>
    <div id="json" class="step slide letterD" data-x="-4500" data-y="0">
        <h3>JSON &amp; other animals</h3>
        <div id="exampleJson">
<pre class="prettyprint">
{
  "@context": {
    "ical": "http://www.w3.org/2002/12/cal/ical#",
    "xsd": "http://www.w3.org/2001/XMLSchema#",
    "ical:dtstart": {
      "@type": "xsd:dateTime"
    }
  },
  "ical:summary": "Lady Gaga Concert",
  "ical:location": "New Orleans Arena, New Orleans, Louisiana, USA",
  "ical:dtstart": "2011-04-09T20:00Z"
}
</pre>
        </div>
    <div id="dateOutput"><p></p></div>
</div>
    <div id="outputJson" class="step slide code" data-x="-4500" data-y="0" data-rotate-y="90" data-z="-1000">
        <pre class="prettyprint">
d3.json('../gaga.json', function(error, json){
    if (error) return console.warn(error);
    var now = new Date(Date.now());
    var then = new Date(json["ical:dtstart"]);
    var days = Math.floor((now-then) / (1000 * 60 * 60 * 24));
    d3.select('#dateOutput')
                    .append('p').text(days+' days elapsed');
});
        </pre>
        <h2><a href="https://github.com/mbostock/d3/wiki/Requests#d3_xml">D3.csv, D3.xml and others also exist.</a></h2>
    </div>
    <div id="force" class="step slide letterD" data-x="-3500" data-y="-1000">
        <h3>Layouts and Physics</h3>
        <div id="forcechart"></div>
        <p>A huge amount of code for free, if you read the documentation <br />(<strong>beware Stackoverflow</strong>)</p>
    </div>
<div id="forceCode" class="step slide code" data-x="-3500" data-y="-1000" data-rotate-y="90" data-z="-1200">
    <pre class="prettyprint">
//Force-Directed Graph Setup
var forcecolor = d3.scale.category20();

var forceOne = d3.layout.force()
    .charge(-200)
    .linkDistance(100)
    .size([400, 400]);

var svgOne = d3.select("#forcechart").append("svg")
    .attr("class", "chart")
    .attr("width", "450px")
    .attr("height", "500px");

forceOne
    .nodes(graphOne.nodes)
    .links(graphOne.links)
    .start();

var linkOne = svgOne.selectAll(".link")
    .data(graphOne.links)
  .enter().append("line")
    .attr("class", "link")
    .style("stroke-width", function(d) { return Math.sqrt(d.value); });

var nodeOne = svgOne.selectAll(".node")
    .data(graphOne.nodes)
  .enter().append("circle")
    .attr("class", "node")
    .attr("r", 5)
    .style("fill", function(d) { return forcecolor(d.group); })
    .call(forceOne.drag);

nodeOne.append("title")
    .text(function(d) { return d.name; });


forceOne.on("tick", function() {
  linkOne.attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  nodeOne.attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });
});

    </pre>
</div>

<div id="forceData" class="step slide code" data-x="-3500" data-y="-1000" data-rotate-y="90" data-z="-2400">
    <pre class="prettyprint">
graphOne = {
   "nodes": [
       {"name":"A",  "group": 1},
       {"name":"B",  "group": 1},
       {"name":"C",  "group": 2},
       {"name":"D",  "group": 3},
       {"name":"E",  "group": 3}
   ],
   "links": [
       {"source":0, "target":1, "value":1},
       {"source":0, "target":2, "value":5},
       {"source":1, "target":2, "value":5},
       {"source":3, "target":4, "value":1},
       {"source":3, "target":2, "value":5},
       {"source":4, "target":2, "value":5},
   ]

};
    </pre>
</div>

    <div class="step slide letterD" data-x="-2500" data-y="-1000">
                <h3>Higher-level Libraries based on D3</h3>
                <ul>
                    <li><a href="http://square.github.io/crossfilter/">Crossfilter</a>: High-performance charts for analytics</li>
                    <li><a href="http://nvd3.org/">nv3d.js</a>: reusable d3.js charts</li>
                    <li><a href="http://code.shutterstock.com/rickshaw/">Rickshaw</a>: Interactive Time Series</li>
                </ul>
                    <h3><a href="https://github.com/mbostock/d3/wiki/Tutorials">Official list of tutorials</a></h3>
            </div>
    <!-- 3 -->
    <div id="appOverview" class="step slide number" data-x="1500" data-y="-2000">
        <h3>Example App: SPARQL Result Viewer</h3>
        <ol>
            <li>Requesting the Data</li>
            <li>Displaying the text triples</li>
            <li>Drawing a graph</li>
            <li>Animating it</li>
            <li>Future Work</li>
        </ol>
            
    </div>
    <div id="appRequest" class="step slide number" data-x="2500" data-y="-2000">
        <pre class="prettyprint">
SELECT ?game, ?title
WHERE {
    ?game &lt;http://purl.org/dc/terms/subject&gt; 
&lt;http://dbpedia.org/resource/Category:First-person_shooters&gt; .
    ?game foaf:name ?title .
}
ORDER by ?title
LIMIT 5</pre>
    </div>
    <div id="appRequestCode" class="step slide code" data-x="2500" data-y="-2000" data-z="-1000" data-rotate-y="90">
        <pre class="prettyprint">
d3.json(dbpediamusicians, function(error, json){
    console.log(json);      
});
        </pre>
    </div>
    <div id="bindresults" class="step slide number" data-x="3500" data-y="-1000">
        <table id="bindresults" border="1"></table>
        <pre class="prettyprint">
 var rows = d3.select('#bindresults')
.selectAll("tr")
.data(json['results']['bindings'])
.enter()
.append("tr");

var cells = rows.selectAll('td')
.data(function(d){return d3.values(d)})
.enter().append("td")
.text(function(d) {return d['value']});</pre>
    </div>
    <div id="graphresults" class="step slide number" data-x="2500" data-y="0">
    </div>
    <div id="animateresults" class="step slide number" data-x="3500" data-y="1000"></div>
    <div id="futurework" class="step slide number" data-x="2500" data-y="2000"></div>
    <div class="step slide number" data-x="1500" data-y="2000">
        <h1>Summary</h1>
        <ul>
            <li>D3 Provides lots of stuff for free</li>
            <li>... and Just enough Rope to hang yourself</li>
            <li>The best option is to try and keep to the style which it imposes:
            <ul>
                <li>Use Selects</li>
                <li>Evaluate lazily</li>
                <li>Use the libraries for things like interpolation, colours</li>
            </ul></li>
            </ul></div>

    <!-- overview -->
    <div id="overview" class="step slide" data-x="0" data-y="0" data-scale="10"></div>
</div>
<div class="hint">
    <p>Use a spacebar or arrow keys to navigate</p>
</div>
<script>
if ("ontouchstart" in document.documentElement) {
    document.querySelector(".hint").innerHTML = "<p>Tap on the left or right to navigate</p>";
}
</script>

<script src="js/impress.js"></script>
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>

<script type="text/javascript"> if (typeof(d3) == 'undefined') { alert('d3 didn\'t load'); document.write("<script src=\"js/d3.min.js\"><\/script>");}</script>


<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=js"></script>
<script src="js/d3seminar.js"></script>
<script>impress().init();</script>
</body>
</html>

